kind: ZarfPackageConfig
metadata:
  name: podinfo
  version: 0.0.1
constants:
  - name: PODINFO_IMAGE
    value: '###ZARF_PKG_TMPL_PODINFO_IMAGE###'
  - name: PODINFO_TAG
    value: '###ZARF_PKG_TMPL_PODINFO_TAG###'
components:
  - name: podinfo
    required: true
    charts:
      - name: podinfo
        version: 6.4.0
        namespace: podinfo
        url: oci://ghcr.io/stefanprodan/charts/podinfo
        valuesFiles:
          - values.yaml
    images:
      - '###ZARF_PKG_TMPL_PODINFO_IMAGE###:###ZARF_PKG_TMPL_PODINFO_TAG###'
    manifests:
      - name: podinfo-config
        namespace: podinfo
        files:
          - uds-package.yaml
    actions:
      onDeploy:
        after:
          - wait:
              cluster:
                kind: deployment
                name: podinfo
                namespace: podinfo
                condition: available
